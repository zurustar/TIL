
PostgreSQLを前提としたRDBMSの勉強

# データベース




# RDBMS



# PostgreSQL

追記型アーキテクチャにより高速に動作。

でも追記型なので更新、削除でゴミが残る。このゴミをきれいにする掃除(VACUUMという)の実行が必要。

## PostgreSQLを構成するプロセス一覧

| プロセス名 | 役割 |
| --- | --- |
| マスタープロセス | 最初に起動されるプロセス |
| ライタ | 共有バッファの内容をデータファイルに書き出す |
| WALライタ | WALバッファの内容をWALファイルに書き出す |
| チェックポインタ | すべてのダーティページをデータファイルに書き出す |
| 自動バキュームランチャ | 設定に従って自動バキューム処理を行う |
| 統計情報コレクタ | データベースの活動状況に関する統計情報を収集 |
| バックエンド | クライアントからの接続要求に対して起動されクエリを処理する |
| バックグラウンドワーカ | ロジカルレプリケーション用のワーカ |
| パラレルワーカ | パラレススキャン実行時に起動される |



## メモリ構成

# SQL

RDBMSを操作するために標準化された言語。



## DDL

## DML

RDBMSのCRUDに対応する命令として、以下がある。

|     | CRUDでいうと | SQLの命令 | できること       |
| --- | ------------ | --------- | ---------------- |
|  C  | create       | INSERT    | 新規データの挿入 |
|  R  | read         | SELECT    | データの検索     |
|  U  | update       | UPDATE    | 既存データの更新 |
|  D  | delete       | DELETE    | データの削除     |


### INSERT

### DELETE

### UPDATE

### SELECT

ひとつ以上の表をこねくり回して表を作る、とイメージするとわかりやすいかもしれない。

#### サブクエリ

以降いろいろ説明を書くが、いずれもテーブル名を記載できる場所には、SELECT文を書くことができる。
SELECTはテーブルからテーブルを生み出すものであるから。

#### 絞り込み  WHERE

特定の条件に合う行だけを取り出すには、WHERE句に条件を記載する。

###### =, <, >, <=, >=, !=, <>, NOT

##### BETWEEN

##### IN

##### LIKE

#### 結合 UNIONとJOIN

ふたつのテーブルをくっつける方法は２種類。
縦方向にくっつける」「UNION」と横方向にくっつける「JOIN」がある。
JOINにはさらに
「(INNER) JOIN」「LEFT (OUTER) JOIN」「RIGHT (OUTER) JOIN」「CROSS JOIN」
という結合方法が異なる４種類がある。

#### UNION

|  X  |  Y  |  Z  |
| --- | --- | --- |
|  1  |  3  |  5  |
|  2  |  4  |  6  |

と

|  X  |  Y  |  Z  |
| --- | --- | --- |
|  7  |  9  |  b  |
|  8  |  a  |  c  |

を UNIONすると

|  X  |  Y  |  Z  |
| --- | --- | --- |
|  1  |  3  |  5  |
|  2  |  4  |  6  |
|  7  |  9  |  b  |
|  8  |  a  |  c  |

になる。SQLだと、

SELECT table1 UNION table2;

みたいに書く。

#### CROSS JOIN

#### 内部結合 (INNER) JOIN

#### 左外部結合 LEFT (OUTER) JOIN

#### 右外部結合 RIGHT (OUTER) JOIN



## DCL

