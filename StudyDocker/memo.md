
# 仮想化の種類

コンテナ型仮想化は、アプリ実行に必要なものだけを含み、カーネルはホストOSのものを使用。動作が早くリソース使用量も控えめ。
Docker Engineを起動しておく必要あり。

アプリの動作に必要なものは全てDockerイメージに含まれているので、Dockerイメージを共有もしくはDockerイメージの構築に必要なコード(Dockerfileなど)を共有することで環境構築時間が最小化され、環境の差異による動作不良の回避できる。


## なんか

仮想化マシン上でDockerを使うとかも普通にあるので並べて比較するものでは無くなっている気がしないでもないが、Dockerが急に流行り始めたときには従来の仮想化とどうちがうの？という説明がわかりやすかったからしょうがない。

# Docker用語

- registry
    - イメージを管理するためのサービス
- repository
- tag
- Docker Image 
    - コンテナの実行に必要なファイルをまとめたもの。クラスみたいなもん。
    - 階層構造を取ることで不必要にストレージを消費せずに済むようになっている。
- Docker Container
    - インスタンスみたいなもん


# インストール

公式サイトに書いてある手順に沿うだけ。ひっかかるようなところはあまりなさそう。

以下の実行により問題なくインストールできていることが確認できる。

docker run hello-world

このコマンドで実行されるイメージはこちら。

https://hub.docker.com/_/hello-world



# Dockerfile

- FROM
    - どのイメージをベースにするか？
- RUN
    - イメージの作成中にコマンドを実行
- CP
    - ホスト上のファイルをコンテナの中にコピーする
- ENTRYPOINT
    - コンテナ起動時に（基本的に）実行するコマンドを書く。
- CMD
    - コンテナ起動時にデフォルトで実行するコマンドを書く。


# CLI 

## docker search 〜 リポジトリ上のイメージを検索


## docker image

イメージを操作するコマンドたち

### docker image build

-t ビルドするイメージに付与するタグを指定する

### docker image pull 〜 レジストリからイメージをダウンロード


### docker image ls 〜 ホスト上のイメージ一覧取得



## docker container

コンテナを操作するコマンドたち

### docker container run 〜 コンテナ起動

- -d
    - バックグラウンド起動
- -p
    - ホストのどのポートでコンテナのどのポートを公開するか？
    - <ホスト側ポート番号>:<コンテナ側ポート番号>
- -v
    - ホストマシンのディレクトリをコンテナにマウント
    - <ホスト側ディレクトリ>:<コンテナ側マウントポイント>:<オプション>
        - ディレクトリは絶対パスで指定する
- --link
    　- deprecated? いずれ廃止されるらしい

### docker container exec 〜 実行中コンテナでコマンド実行

- -i
- -t

### docker container ps 〜 コンテナ一覧の表示

オプションを指定しない場合は実行中のコンテナだけを表示する

### docker container rm 〜コンテナの削除

起動時のオプションで終了時に消えるように指定していない限りは、終了後のコンテナも残っているので、不要になったら明示的に消す必要あり。

# docker compose

複数のコンテナを動かす。YAML形式の設定ファイルを作る。

Linux環境においてはdockerを入れただけでは入らず、別途インストールする必要があった。


# docker swarm


# kubernetes




