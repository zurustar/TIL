
# 仮想化の種類

## (仮想化じゃないけど)ベアメタル

昔ながらのやりかた。
マシンが高性能化してオーバースペックになることも。
かといって頑張っていろんなミドルをつっこむと、各ミドルが使うライブラリのバージョンのずれなどでトラブル頻発。

## ハイパーバイザ型仮想化 Vmware, KVMなど

ハードウェアをソフトウェアで疑似ることでひとつのハードに複数のコンピュータを再現することができる。
アプリを渡されて構築するには依存関係のあるライブラリのインストールがめっちゃ大変という問題が残ってた。（環境問題）

KVMはカーネルは共用していた気がするけれど、まぁいいや

## コンテナ型

環境をAPと一緒にまとめてる感じ。
他の仮想化と違って軽量ながら環境問題は解決。
開発する人も手元でちゃんとした環境を作れるし、商用環境構築もそのまま持っていくだけだから環境問題が発生することがない。
インフラ構築しかしてなかった人の仕事がなくなっちゃう。

## なんか

仮想化マシン上でDockerを使うとかも普通にあるので並べて比較するものでは無くなっている気がしないでもないが、Dockerが急に流行り始めたときには従来の仮想化とどうちがうの？という説明がわかりやすかったからしょうがない。

# Docker用語

リポジトリ

レジストリ

Docker Image ... クラスみたいなもん

Docker Container ... インスタンスみたいなもん


# インストール

公式サイトに書いてある手順に沿うだけ。ひっかかるようなところはあまりなさそう。


# Dockerfile

FROM ... どのイメージをベースにするか？

RUN ... イメージの作成中にコマンドを実行

CP ... ホスト上のファイルをコンテナの中にコピーする

ENTRYPOINT ... コンテナ起動時に（基本的に）実行するコマンドをかく

CMD ... コンテナ起動時にデフォルトで実行するコマンドをかく


# CLI 

## docker search 〜 リポジトリ上のイメージを検索


## docker image

イメージを操作するコマンドたち

### docker image build

-t ビルドするイメージに付与するタグを指定する

### docker image pull 〜 レジストリからイメージをダウンロード


### docker image ls 〜 ホスト上のイメージ一覧取得



## docker container

コンテナを操作するコマンドたち

### docker container run 〜 コンテナ起動

-d バックグラウンド起動

-p xxx:yyy  ホストのどのポートでコンテナのどのポートを公開するか？

### docker container exec 〜 実行中コンテナでコマンド実行

-i

-t

### docker container ps 〜 コンテナ一覧の表示

オプションを指定しない場合は実行中のコンテナだけを表示する

### docker container rm 〜コンテナの削除

# docker compose

複数のコンテナを動かす。YAML形式の設定ファイルを作る。

Linux環境においてはdockerを入れただけでは入らず、別途インストールする必要があった。


# docker swarm


# kubernetes




